% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/fit_models_by_group.R
\name{fit_models_by_group}
\alias{fit_models_by_group}
\title{Fit Linear Models Across Outcomes and Groups}
\usage{
fit_models_by_group(
  data,
  outcomes,
  base_predictors,
  group_col = "superpop",
  groups = "All",
  model_type = NULL,
  interaction_terms = NULL,
  outcome_covariates = NULL,
  group_covariates = NULL
)
}
\arguments{
\item{data}{A data frame containing the variables for analysis}

\item{outcomes}{Character vector of outcome variable names to model}

\item{base_predictors}{Character vector of predictor variable names to include in all models}

\item{group_col}{Character string specifying the column name for grouping variable. Default is "superpop"}

\item{groups}{Character vector specifying which groups to analyze. Use "All" to include all data without grouping. Default is "All"}

\item{model_type}{Character string specifying the model type. Must be one of: "main", "interaction", "nested", or "stratified".
If NULL, defaults to "main". Default is NULL.}

\item{interaction_terms}{Character vector specifying which interaction terms to include when model_type = "interaction".
Can use R formula syntax: c("age\emph{sex", "treatment}apoe") includes both main effects and interactions,
or c("age:sex", "treatment:apoe") for interaction-only terms, or "all_pairwise" for all pairwise interactions.
If NULL and model_type = "interaction", will include only main effects (no interactions).}

\item{outcome_covariates}{Optional named list of additional covariates specific to certain outcomes.
Keys should be outcome names, values should be character vectors of covariate names.}

\item{group_covariates}{Optional named list of additional covariates specific to certain groups.
Keys should be group names, values should be character vectors of covariate names.}
}
\value{
A tibble with the following columns:
\describe{
\item{outcome}{The outcome variable name}
\item{superpop}{The group being analyzed}
\item{model}{The model type specified}
\item{predictors}{The full predictor formula string used}
\item{model_equation}{The complete model equation (outcome ~ predictors)}
\item{res}{List column containing the fitted lm objects}
\item{dataf}{List column containing tidy model results from broom::tidy()}
\item{n_obs}{Number of observations used in each model}
}
}
\description{
Fits linear models for multiple outcomes across different groups (e.g., ancestry, sex,
treatment groups, etc.) with flexible covariate specifications and model types.
Allows for outcome-specific and group-specific covariates to be added to base predictors.
}
\examples{
\dontrun{
# Main effects model
main_results <- fit_group_models(
  data = proj_data,
  outcomes = c("verbal_ability", "memory"),
  base_predictors = c("age", "id_gender", "apoe_risk_group"),
  groups = c("AFR", "EUR", "AMR"),
  model_type = "main"
)

# Interaction model with specific interactions
int_results <- fit_group_models(
  data = proj_data,
  outcomes = c("tau", "ab42_ab40"),
  base_predictors = c("age", "id_gender", "apoe_risk_group"),
  groups = c("AFR", "EUR", "AMR"),
  model_type = "interaction",
  interaction_terms = c("age:id_gender", "age:apoe_risk_group")
)

# Interaction model with all pairwise interactions
full_int_results <- fit_group_models(
  data = your_data,
  outcomes = c("y"),
  base_predictors = c("x1", "x2", "x3"),
  groups = c("placebo", "medication"),
  model_type = "interaction",
  interaction_terms = "all_pairwise"
)
}
}
